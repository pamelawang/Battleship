/* NAME: GamePanel.java
 * Created by: Meera Hejmadi and Pamela Wang
 * Date created: 12 Dec 2014
 * CS 230 Project: Battleship
 * 
 * Purpose: 
 * 
 * @author Meera Hejmadi
<<<<<<< HEAD
=======
 * @author Pamela Wang
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
 */

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
<<<<<<< HEAD
import javax.swing.BorderFactory;


public class GamePanel extends JPanel {
  
  private JButton letsPlay = new JButton();
  private JPanel centerPiece; //will contain banner, humanGrid, and shootAtGrid
  private JLabel banner;
  private JPanel humanGrid;
  private Cell[][] humanRefGrid;
=======

public class GamePanel extends JPanel {
  
  private JPanel centerPiece; //will contain banner, humanGrid, and shootAtGrid
  private JLabel banner;
  private JPanel humanGrid;
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
  private JPanel shootAtGrid;
  private JPanel boatsLeft; //goes on the left of the center panel
  private int numBoatsLeftComp;
  private int numBoatsLeftHuman;
  private int numBombsLeftComp;
  private int numBombsLeftHuman;
  private JPanel bombsLeft; //goes on right of center panel
  private int gridSize;
  private Game currentGame;
<<<<<<< HEAD
  private final Color SEA = new Color (0, 0, 128);
//  private static Border CELL_BORDER = BorderFactory.createBevelBorder(BevelBorder.RAISED);
=======
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
  
  public GamePanel(Game battleship) {
    
    setLayout(new BorderLayout());
    setBackground(Color.black);
    
    banner =  new JLabel("Welcome to Battleship!");
    humanGrid = new JPanel();
    shootAtGrid = new JPanel();
    gridSize = battleship.getGridSize();
    numBoatsLeftComp = battleship.getCompPlayer().getNumBoats();
    numBoatsLeftHuman = battleship.getHumanPlayer().getNumBoats();
//    numBombsLeftComp = battleship.getCompPlayer().getNumBombs();
//    numBombsLeftHuman = battleship.getHumanPlayer().getNumBombs();
    numBombsLeftComp = 0;
    numBombsLeftHuman = 0;
    currentGame = battleship;
<<<<<<< HEAD
    humanRefGrid = currentGame.getHumanPlayer().getGrid();
=======
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
    
    boatsLeft = createBoatsLeft();
    bombsLeft = createBombsLeft();
    centerPiece = createCenterPiece();
    
    add(boatsLeft, BorderLayout.WEST);
    add(centerPiece, BorderLayout.CENTER);
    add(bombsLeft, BorderLayout.EAST);
    
  }
  
  public JPanel createCenterPiece() {
    JPanel center = new JPanel();
    center.setLayout(new GridLayout(4, 1));
    center.setBackground(Color.black);
    
    JPanel emptySpace = new JPanel();
<<<<<<< HEAD
    emptySpace.setLayout(new GridLayout(3,6));
    emptySpace.setBackground(Color.black);
    JPanel moreEmpty = new JPanel();
    moreEmpty.setBackground(Color.black);
    JPanel playButton = new JPanel();
    playButton.add(letsPlay);
    letsPlay.setText("Play game!");
    
//    for (int i = 0; i < 3; i++) {
//      for (int j = 0; j < 3; j++) {
//        if (i == 1 && j == 1) {
//          System.out.println("playButton: i = " + i + " j = " + j);
//          emptySpace.add(playButton);
//        } else {
//          System.out.println("playButton: i = " + i + " j = " + j);
//          emptySpace.add(moreEmpty);
//        }
//      }
//    }
    emptySpace.add(letsPlay);
    
=======
    emptySpace.setBackground(Color.black);
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
    shootAtGrid = createShootAtGrid();
    humanGrid = createHumanGrid();
    
    center.add(banner);
    center.add(shootAtGrid);
    center.add(emptySpace);
    center.add(humanGrid);
    
    return center;
  }
  
  public JPanel createBoatsLeft() {
    JPanel boats = new JPanel();
    boats.setLayout(new GridLayout(5, 1));
    boats.setBackground(Color.gray);
    JLabel title = new JLabel("     Boats still afloat:          ");
    JLabel emptySpace = new JLabel("");
    JLabel comp = new JLabel("     Computer: " + numBoatsLeftComp);
    JLabel human = new JLabel("     Human: " + numBoatsLeftHuman);
    
    boats.add(title);
    boats.add(emptySpace);
    boats.add(comp);
    boats.add(emptySpace);
    boats.add(human);
    
    return boats;
  }
  
  public JPanel createBombsLeft() {
    JPanel bombs = new JPanel();
    bombs.setLayout(new GridLayout(5, 1));
    bombs.setBackground(Color.blue);
    JLabel title = new JLabel("     Bombs left:     ");
    JLabel comp = new JLabel("     Computer: \n" + numBoatsLeftComp);
    JLabel human = new JLabel("     Human: \n" + numBoatsLeftHuman);
    JLabel emptySpace = new JLabel("");
    
    bombs.add(title);
    bombs.add(emptySpace);
    bombs.add(comp);
    bombs.add(emptySpace);
    bombs.add(human);
    return bombs;
  }
  
  public JPanel createShootAtGrid() {
    JPanel grid = new JPanel();
    //grid.setPreferredSize(new Dimension(screenHeight/3, screenlength/2))
    grid.setLayout(new GridLayout(gridSize, gridSize));
    grid.setBackground(Color.black);
    
    for (int i = 1; i <= gridSize; i++) {
      for (int j = 1; j <= gridSize; j++) {
        GridButton temp = new GridButton(i, j);
        temp.addActionListener(new GridButtonListener());
        grid.add(temp);
        
      }      
    }
    
    return grid;
  }
  
  public JPanel createHumanGrid() {
<<<<<<< HEAD
    JPanel hGrid = new JPanel();
    hGrid.setLayout(new GridLayout(10, 10));
    //grid.setPreferredSize(new Dimension(screenHeight/3, screenlength/2))
    hGrid.setLayout(new GridLayout(gridSize, gridSize));
    hGrid.setBackground(Color.black);
    
    for (int i = 0; i < gridSize; i++) {
      for (int j = 0; j < gridSize; j++) {
        GridButton temp = new GridButton(i, j);
        switch (humanRefGrid[i][j].getAllInfo()) {
          case (1):
            temp.setBackground(Color.black);
            break;
          case (2):
            temp.setBackground(Color.white);
            break;
          case (3):
            temp.setBackground(Color.red);
            break;
          default:
            temp.setBackground(SEA);
        }
        System.out.println("humanGrid(): " + i + ", " + j + " is " + temp.getBackground());
        hGrid.add(temp);        
      }      
    }
    
    return hGrid;
=======
    JPanel grid = new JPanel();
    grid.setLayout(new GridLayout(10, 10));
    //grid.setPreferredSize(new Dimension(screenHeight/3, screenlength/2))
    grid.setLayout(new GridLayout(gridSize, gridSize));
    grid.setBackground(Color.black);
    
    for (int i = 1; i <= gridSize; i++) {
      for (int j = 1; j <= gridSize; j++) {
        GridButton temp = new GridButton(i, j);
        temp.addActionListener(new GridButtonListener());
        grid.add(temp);        
      }      
    }
    
    return grid;
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
  }
  
  private class GridButtonListener implements ActionListener {
    
    private GridButton nextShot;
    
    public void actionPerformed (ActionEvent e) {
<<<<<<< HEAD
      if (e.getSource() == letsPlay) {
        letsPlay.setVisible(false);
        revalidate();
      } else {
        System.out.println("help");
        if (currentGame.getGameOver() < 0) {
          nextShot = (GridButton) e.getSource();
          try {
            currentGame.turn(nextShot.getXCoord(), nextShot.getYCoord());
            System.out.println("Took a shot! (" + nextShot.getXCoord()
                                 + ", " + nextShot.getYCoord() + ")");
          } catch (InvalidShotException oops) {
            //do nothing
          }
=======
      System.out.println("help");
      while (currentGame.getGameOver() < 0) {
        nextShot = (GridButton) e.getSource();
        try {
          currentGame.turn(nextShot.getXCoord(), nextShot.getYCoord());
          System.out.println("Took a shot! (" + nextShot.getXCoord()
                               + ", " + nextShot.getYCoord() + ")");
        } catch (InvalidShotException oops) {
          //do nothing
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
        }
      }
    }
  }
<<<<<<< HEAD
    
  }
=======
  
}
>>>>>>> bfe53d32bb7fd9405c2f8cb7bf29590b28d04cfe
